В первую очередь стоит поговорить об инструменте для работы
с геометрией. Выбор пал на один из самых популярных, стандарт
в этой сфере -- платформа \emph{GeoGebra}.
В ней есть множество различных функций для работы с геометрическими
фигурами. Этим не могут похвастаться различные многопользовательские
онлайн-доски (хоть и в большинстве случаев им это просто не нужно).

К примеру: в прошлом году на математическом факультете дистанционные занятия
по аналитической геометрии успешно проводились с использованием
\emph{GeoGebra}, только транслировалась она через сторонний мессенджер,
используя демонстрацию экрана.

В проекте использовались веб-элементы \emph{GeoGebra},
а именно апплеты. На официальном сайте в документации подробно,
хотя местами довольно сложно, описано API апплетов. Оно позволяет
развернуть на странице браузера стандартную версию \emph{GeoGebra}
и манипулировать ее состоянием и элементами средствами языка
\emph{JavaScript}.

Следующая задача: создать схему интерфейса (Рис.~\ref{fig:img3}).

\begin{figure}[h]
	\begin{center}
		\scalebox{0.6}{\input{Inkscape/Inkscape_img3.tex}}
		\caption{Общая схема клиентской части}
		\label{fig:img3}
	\end{center}
\end{figure}

Для удобства было решено разделить страницу на три части (Рис.~\ref{img1}). В первой части (левой)
располагается основная информация комнаты, панель управления правами и список участников.
Вторая часть (центральная) содержит апплет \emph{GeoGebra}.
В третьей части (правой) был размещен чат. При этом, для экономии места,
левую и правую части можно свернуть. Когда они свернуты пользователь
может отследить активность чата и, если используется комната с
ограниченными правами, запрос на предоставление прав. Отслеживание
выполняется путем мигания боковых вертикальных кнопок (с помощью которых
и сворачиваются элементы).

\begin{figure}[h]
	\begin{center}
		\includegraphics[width=\linewidth]{img1}
		\caption{Веб-интерфейс}
		\label{img1}
	\end{center}
\end{figure}

В комнате с ограниченными правами, если пользователь запрашивает доступ
с помощью специальной кнопки, то приходит уведомление владельцу и в
списке участников комнаты, напротив имени пользователя, запросившего
права, появляются две кнопки $+$ и $-$, нажимая первую, владелец передает
право редактировать доску, соответственно, нажимая вторую, он отказывает
в доступе.

Нeмaлoвaжной функцией является трансляция курсора мыши пользователя,
который в данный момент имеет доступ для редактирования доски. Эта
функция включается соответствующей кнопкой в левой панели.

Еще одной функцией является трансляция координат. Функция позволяет
полностью синхронизировать перемещение координат апплета \emph{GeoGebra},
включается она так же соответствующей кнопкой в левой панели.
Эта функция не была включена по умолчанию, т.е. активируется
только кнопкой, т.к. в некоторых случаях она мешает просмотру.


Все элементы интерфейса были написаны с использованием
шаблонизатора \emph{handlebars}. Он обеспечивает более гибкую
компоновку элементов веб-страниц.

Стоит отметить важность набора формул в чате, поэтому, используя библиотеку
\emph{KaTeX}, была добавлена поддержка синтаксиса \emph{LaTeX}.
Т.е. каждое сообщение, которое приходит пользователю проверяется
библиотекой на наличие специальных символов, в которых помещается
выражение.

Также для эффективного использования экранного места был
добавлен полноэкранный режим с помощью стандартных средств
языка \emph{JavaScript}.

Кроме основной страницы комнаты есть и вспомогательные. Они
обеспечивают простую и удобную систему входа в нее: окно приветствия,
окно создания комнаты, окно выбора типа прав и окно входа в комнату.

Вход в определенную комнату осуществляется с помощью сгенерированной
пары ключей (Рис.~\ref{img2}): ключ комнаты (номер комнаты) и ключ владельца,
последний нужен для работы
ограниченной системы прав. Эти ключи передаются на сервер, и он уже
отправляет пользователя в искомую комнату.
Данные ключи можно скопировать, нажав на соответствующую кнопку
при создании комнаты или, если комната уже создана, скопировать
только ключ комнаты через кнопку в левой панели.

\begin{figure}[h]
	\begin{center}
		\includegraphics[width=\linewidth]{img2}
		\caption{Интерфейс подключения к комнате}
		\label{img2}
	\end{center}
\end{figure}
