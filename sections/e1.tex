В качестве основы сервера  была выбрана платформа \emph{Node.js}
и фреймворк \emph{Express}. Такая комбинация обеспечивает достаточно стабильную
и быструю работу.

После выбора платформы встал вопрос о концепции совместного доступа.
Это вопрос об одном меле и двух учениках: одновременно пользоваться
мелом не получится, только поочередно передавая его друг другу.
Остается решить, как этот мел будет передаваться между учениками.
Появляются два варианта: ученики будут отбирать мел друг у друга,
или же спрашивать учителя: кто в данный момент должен писать.
Возникает очевидный вопрос: <<почему мел один?>>. Предположим,
что два человека попытаются на одной доске переместить одну и ту же
точку в разные места. В таком случае эта точка раздвоится, чего не может быть.
Тем самым появляется простое решение -- система комнат с двумя типами прав:
ограниченные и свободные (restricted и free).

Ограниченная система прав (Рис.~\ref{fig:img1}) предполагает обязательное наличие владельца комнаты
и согласование с ним всех действий. Можно привести пример учитель-ученики:
учитель объясняет тему, после этого дает задание: построить фигуру;
ученик, желающий это сделать, запрашивает доступ (права) на редактирование
доски и соответственно это видит учитель и разрешает доступ.
При этом владелец комнаты всегда может отобрать права на редактирование
доски у любого ученика.

\begin{figure}[h]
	\begin{center}
		\scalebox{0.6}{\input{Inkscape/Inkscape_img1.tex}}
		\caption{Ограниченная система прав}
		\label{fig:img1}
	\end{center}
\end{figure}

Свободная система прав (Рис.~\ref{fig:img2}) не предполагает наличие владельца комнаты,
каждый участник может забрать права на редактирование доски без
согласования с другими участниками. Пример: два преподавателя обсуждают
какую-нибудь схему на доске и вместе ее дополняют; в этом случае было бы
неудобно чтобы каждый раз один из преподавателей <<разрешал>> другому
редактировать доску как в ограниченной системе прав.

\begin{figure}[h]
	\begin{center}
		\scalebox{0.6}{\input{Inkscape/Inkscape_img2.tex}}
		\caption{Свободная система прав}
		\label{fig:img2}
	\end{center}
\end{figure}

Следующим шагом стало создание базы данных для хранения комнат.
Это связано с тем, чтобы после выхода всех участников из комнаты была
возможность вернуться в эту комнату и не потерять всю историю действий.
Было рассмотрено несколько библиотечных баз данных, взаимодействующих
с платформой \emph{Node.js}, но все они оказались слишком тяжелыми
для такой простой задачи. Пример: БД \emph{MySQL} требует отдельный
сервер для работы и большое количество оперативной памяти, что
является недопустимым для проекта, т.к. он должен иметь возможность
работать на маломощном сервере. Поэтому решено было написать собственную
базу данных.

Структура базы данных представляла систему, состоящую из двух блоков.
Первый блок должен был выполнять функцию хранения данных на локальном
диске с помощью \emph{json}-файлов. Второй блок хранил данные в
оперативной памяти. Взаимодействуют они следующим образом: пока
в комнате есть участники -- данные комнаты хранятся в оперативной
памяти для быстрого доступа к ним. Как только все участники покидают
комнату -- данные записываются на локальный диск в \emph{json}-файл и
освобождаются из оперативной памяти. Соответственно, если в пустую комнату
заходит хотя бы один участник -- данные этой комнаты считываются с
\emph{json}-файла и помещаются в оперативную память.
