\begin{lstlisting}[label=sc12_s_skt_xml,caption={Скрипт сокета обмена XML-кода на стороне сервера: xml.js}]
    const dbRAM = require('../dbRAM.js');

    module.exports = function (socket, rooms) {
        socket.on('xml', function (msg) {
            try {
                if (socket.id == dbRAM.getPermissionUserId(msg.idRoom, rooms)) {
                    socket.to(msg.idRoom).emit('xml', msg.data);
                    dbRAM.setXML(msg.idRoom, msg.data, rooms);
                }
            }
            catch (e) {
                console.log(e);
            }
        });
    }
    
\end{lstlisting}
